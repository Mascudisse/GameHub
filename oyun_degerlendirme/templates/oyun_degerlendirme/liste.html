{% extends "base.html" %}
{% block title %}Oyun DeÄŸerlendirmeleri{% endblock %}

{% block icerik %}
<h1 class="mb-4 text-center">â­ Oyun DeÄŸerlendirmeleri</h1>

<div class="row g-4">
{% for d in degerlendirmeler %}
<div class="col-md-4">
    <div class="card shadow h-100">
        <div class="card-body d-flex flex-column">

            <h5 class="fw-bold">{{ d.oyun_adi }}</h5>
            <p>â­ {{ d.puan }}/5</p>

            <p class="text-muted flex-grow-1">
                {{ d.yorum|truncatechars:100 }}
            </p>

            <small>ğŸ‘¤ {{ d.kullanici.username|default:"Misafir" }}</small>

            {% if user.is_authenticated and d.kullanici and user.id == d.kullanici.id %}
            <div class="mt-3 d-flex gap-2">
                <a href="{% url 'oyun_degerlendirme:duzenle' d.id %}"
                   class="btn btn-sm btn-outline-warning w-100">
                    âœï¸ DÃ¼zenle
                </a>

                <form method="post"
                      action="{% url 'oyun_degerlendirme:sil' d.id %}"
                      class="w-100"
                      onsubmit="return confirm('Silinsin mi?')">
                    {% csrf_token %}
                    <button class="btn btn-sm btn-outline-danger w-100">
                        ğŸ—‘ï¸ Sil
                    </button>
                </form>
            </div>
            {% endif %}

        </div>
    </div>
</div>
{% empty %}
<div class="col-12 text-center">
    HenÃ¼z deÄŸerlendirme yok.
</div>
{% endfor %}
</div>

<div class="text-center mt-5">
    <a href="{% url 'oyun_degerlendirme:ekle' %}"
       class="btn btn-primary btn-lg">
        â• DeÄŸerlendirme Ekle
    </a>
</div>
{% endblock %}
